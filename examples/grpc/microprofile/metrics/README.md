
# Helidon MP gRPC Server with Metrics and Tracing Example

This examples shows a simple gRPC application written using Helidon MP that enables
metrics and tracing.

This example can be run together with the [Basic gRPC Client example](../basic-client/README.md) 
which provides a microprofile gRPC client that uses the services deployed in this server.

## Build and run

```bash
mvn -f ../../pom.xml -pl common,microprofile/metrics package
java -jar target/helidon-examples-grpc-microprofile-metrics.jar
```

Run the basic-client from [Basic gRPC Client example](../basic-client/README.md) to invoke 
activity on the gRPC endpoint `localhost:1408`.
```bash
java -jar target/helidon-examples-grpc-microprofile-client.jar 
```

Retrieve the metrics:
```bash
curl http://localhost:8080/metrics
```

Notice that you will get application metrics from the Helidon server metric response similar to this:
```bash
...
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_echo_total counter
# HELP application_io_helidon_microprofile_grpc_example_metrics_StringService_echo_total 
application_io_helidon_microprofile_grpc_example_metrics_StringService_echo_total 1
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_join_total counter
# HELP application_io_helidon_microprofile_grpc_example_metrics_StringService_join_total 
application_io_helidon_microprofile_grpc_example_metrics_StringService_join_total 1
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_rate_per_second gauge
application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_rate_per_second 0.0025970177279218687
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_one_min_rate_per_second gauge
application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_one_min_rate_per_second 0.014712537947741825
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_five_min_rate_per_second gauge
application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_five_min_rate_per_second 0.0032510706679223173
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_fifteen_min_rate_per_second gauge
application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_fifteen_min_rate_per_second 0.0011018917421948848
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_mean_seconds gauge
application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_mean_seconds 0.023214181
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_max_seconds gauge
application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_max_seconds 0.023214181
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_min_seconds gauge
application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_min_seconds 0.023214181
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_stddev_seconds gauge
application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_stddev_seconds 0.0
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_seconds summary
# HELP application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_seconds 
application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_seconds_count 1
application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_seconds_sum 0
application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_seconds{quantile="0.5"} 0.023214181
application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_seconds{quantile="0.75"} 0.023214181
application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_seconds{quantile="0.95"} 0.023214181
application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_seconds{quantile="0.98"} 0.023214181
application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_seconds{quantile="0.99"} 0.023214181
application_io_helidon_microprofile_grpc_example_metrics_StringService_lower_seconds{quantile="0.999"} 0.023214181
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_split_total counter
# HELP application_io_helidon_microprofile_grpc_example_metrics_StringService_split_total 
application_io_helidon_microprofile_grpc_example_metrics_StringService_split_total 1
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_split_rate_per_second gauge
application_io_helidon_microprofile_grpc_example_metrics_StringService_split_rate_per_second 0.002596994840713117
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_split_one_min_rate_per_second gauge
application_io_helidon_microprofile_grpc_example_metrics_StringService_split_one_min_rate_per_second 0.014712537947741825
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_split_five_min_rate_per_second gauge
application_io_helidon_microprofile_grpc_example_metrics_StringService_split_five_min_rate_per_second 0.0032510706679223173
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_split_fifteen_min_rate_per_second gauge
application_io_helidon_microprofile_grpc_example_metrics_StringService_split_fifteen_min_rate_per_second 0.0011018917421948848
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_rate_per_second gauge
application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_rate_per_second 0.0
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_one_min_rate_per_second gauge
application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_one_min_rate_per_second 0.0
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_five_min_rate_per_second gauge
application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_five_min_rate_per_second 0.0
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_fifteen_min_rate_per_second gauge
application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_fifteen_min_rate_per_second 0.0
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_mean_seconds gauge
application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_mean_seconds 0.0
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_max_seconds gauge
application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_max_seconds 0.0
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_min_seconds gauge
application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_min_seconds 0.0
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_stddev_seconds gauge
application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_stddev_seconds 0.0
# TYPE application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_seconds summary
# HELP application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_seconds 
application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_seconds_count 0
application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_seconds_sum 0
application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_seconds{quantile="0.5"} 0.0
application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_seconds{quantile="0.75"} 0.0
application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_seconds{quantile="0.95"} 0.0
application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_seconds{quantile="0.98"} 0.0
application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_seconds{quantile="0.99"} 0.0
application_io_helidon_microprofile_grpc_example_metrics_StringService_upper_seconds{quantile="0.999"} 0.0
...
```
